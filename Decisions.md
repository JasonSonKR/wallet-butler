# Decisions Log

프로젝트 진행 과정에서 내린 중요한 기술적 의사결정과 변경 사항을 기록합니다.

## 2026-01-19: 구조 리팩토링 및 타입 시스템 강화
- **배경**: `App.tsx` 파일이 비대해져 유지보수가 어려워졌고, 타입 정의가 분산되어 있어 오류 발생 가능성이 높았습니다.
- **결정**:
  1. **컴포넌트 분리**: `TransactionList`, `TransactionForm`, `DateActionMenu` 등 주요 UI 요소를 별도 컴포넌트로 분리하여 `src/components/`로 이동했습니다.
  2. **타입 중앙화**: `src/types/ledger.ts` 파일을 생성하여 `Transaction`, `Asset` 등 핵심 타입을 한곳에서 관리하도록 변경했습니다.
  3. **로직 분리**: 반복 거래 생성 로직을 `src/lib/recurrence.ts`로 분리하여 순수 함수 형태로 관리합니다.
  4. **상수 관리**: 카테고리, 반복 주기 등의 상수를 `src/lib/utils.ts`에서 관리하고 `as const`를 사용하여 타입 추론을 강화했습니다.

## 2026-01-19: UI/UX 개선
- **디자인 시스템**: Tailwind CSS를 기반으로 `lovely`(핑크), `lavender`(보라) 컬러 팔레트를 정의하여 일관된 "Lovely Ledger" 테마를 적용했습니다.
- **아이콘**: `lucide-react`를 사용하여 일관된 아이콘 스타일을 적용했습니다.

## 2026-01-19: 개발 편의성 및 UX 개선
- **개발 도구**: 로컬 스토리지 데이터를 쉽게 초기화할 수 있도록 헤더에 '초기화(Reset)' 버튼을 추가했습니다. (개발 단계 전용)
- **네비게이션**: 예산(Budget) 및 설정(Settings) 탭 접근 시 빈 화면 대신 '준비 중' 플레이스홀더 화면을 표시하여 사용자 경험을 개선했습니다.

## 2026-01-23: 제품 방향성 구체화 (Product Pivot)
- **배경**: 단순 기록용 가계부에서 자산 관리 및 지출 통제 도구로의 발전 필요성 제기.
- **결정**:
  1. **돌발 비용(Impulse Cost) 분리**: 예산 초과 원인을 명확히 하기 위해 돌발 비용을 일반 예산 달성률 계산에서 분리하여 별도 섹션("지름신이 다녀간 흔적")으로 관리.
  2. **이벤트 비용(Event Cost) 도입**: 월 생활비와 구분되는 연간 비정기 지출(경조사 등) 개념 도입 예정.
  3. **예산 불변성**: 예산을 지출로 확정하더라도, 최초 계획했던 예산 금액(`budgetAmount`)은 유지하여 목표 대비 성과를 측정하도록 로직 수정.

## 2026-01-23: 예산 탭(Budget View) 구현
- **주차별 분석**: 월 전체가 아닌 주 단위(Week)로 쪼개어 예산 소진율을 보여주도록 구현.
- **시각화**: 수치 나열보다는 Progress Bar와 직관적인 문구, 카드형 UI를 사용하여 사용자 경험 개선.
- **이벤트 예산 분리**: 월 생활비 예산과 비정기적인 이벤트(경조사) 예산을 분리하여, 이벤트 지출이 생활비 관리에 영향을 주지 않도록 설계.

## 2026-01-23: 분석 탭(Analysis View) 개편
- **지출 성격(Nature) 중심 분석**: 단순 카테고리 통계보다 '돈의 성격'(생활비/이벤트/투자/낭비)을 파악하는 것이 자산 관리에 더 유용하다고 판단하여 파이 차트 도입.
- **시각화 강화**: Recharts 라이브러리를 활용하여 도넛 차트와 바 차트로 직관성 향상.

## 2026-01-23: 데이터 관리 및 배포 준비
- **백업/복원**: 별도 서버 없이 로컬 스토리지 방식을 유지하면서 데이터 유실을 방지하기 위해 JSON 파일 기반의 백업/복원 기능 구현.
- **자산 관리**: 자산 카드에 색상 커스터마이징 기능을 추가하고, 무분별한 추가를 막기 위해 최대 10개로 제한.

## 2026-01-23: 자산 탭 로직 개선
- **순자산 자동화**: 자산 탭의 총 자산 금액이 단순히 등록된 계좌 잔액의 합이 아니라, 가계부에 입력된 수입(+)과 지출(-) 내역을 반영하여 실시간으로 계산되도록 로직 변경 (미래 날짜 제외).

## 2026-01-30: 통계 및 자산 탭 고도화
- **통계 탭 (Analysis View) 개선**:
  - **지출 추이 그래프**: 최근 6개월간의 지출 흐름을 파악할 수 있는 Area Chart를 하단에 추가했습니다.
  - **기간 이동**: 월간/연간 분석 모드에서 날짜를 이동할 수 있는 네비게이션(< >)을 추가했습니다.
  - **연간 분석**: 연간 모드 선택 시 그래프와 차트가 해당 연도 데이터를 보여주도록 로직을 확장했습니다.
- **자산 탭 (Asset View) 기능 확장**:
  - **부채(Loan) 관리**: 자산 카테고리에 '대출/부채'를 추가하고, 이자율/기간/상환방식 등 상세 정보를 입력받도록 구현했습니다.
  - **순자산 계산**: 총 자산에서 부채를 차감하여 실질적인 순자산(Net Worth)을 보여주도록 로직을 수정했습니다.
  - **UX 개선**: 금액 입력 시 천 단위 콤마와 한글 금액 표기를 적용하고, 자산 수정 기능을 추가했습니다.
- **버그 수정**:
  - **타입 일관성**: 거래 내역의 수입/지출 타입(INCOME/EXPENSE) 대소문자 처리 문제를 해결하여 데이터 저장 및 수정 시 오류를 방지했습니다.
